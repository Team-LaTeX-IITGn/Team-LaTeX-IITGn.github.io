/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/pixelmatch@5.0.2/index.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";module.exports=pixelmatch;const defaultOptions={threshold:.1,includeAA:!1,alpha:.1,aaColor:[255,255,0],diffColor:[255,0,0]};function pixelmatch(t,e,n,r,i,a){if(!isPixelData(t)||!isPixelData(e)||n&&!isPixelData(n))throw new Error("Image data: Uint8Array, Uint8ClampedArray or Buffer expected.");if(t.length!==e.length||n&&n.length!==t.length)throw new Error("Image sizes do not match.");if(t.length!==r*i*4)throw new Error("Image data size does not match width/height.");a=Object.assign({},defaultOptions,a);const l=r*i,o=new Uint32Array(t.buffer,t.byteOffset,l),f=new Uint32Array(e.buffer,e.byteOffset,l);let s=!0;for(let t=0;t<l;t++)if(o[t]!==f[t]){s=!1;break}if(s){if(n)for(let e=0;e<l;e++)drawGrayPixel(t,4*e,a.alpha,n);return 0}const c=35215*a.threshold*a.threshold;let u=0;const[h,d,b]=a.aaColor,[g,x,y]=a.diffColor;for(let l=0;l<i;l++)for(let o=0;o<r;o++){const f=4*(l*r+o);colorDelta(t,e,f,f)>c?a.includeAA||!antialiased(t,o,l,r,i,e)&&!antialiased(e,o,l,r,i,t)?(n&&drawPixel(n,f,g,x,y),u++):n&&drawPixel(n,f,h,d,b):n&&drawGrayPixel(t,f,a.alpha,n)}return u}function isPixelData(t){return ArrayBuffer.isView(t)&&1===t.constructor.BYTES_PER_ELEMENT}function antialiased(t,e,n,r,i,a){const l=Math.max(e-1,0),o=Math.max(n-1,0),f=Math.min(e+1,r-1),s=Math.min(n+1,i-1),c=4*(n*r+e);let u,h,d,b,g=e===l||e===f||n===o||n===s?1:0,x=0,y=0;for(let i=l;i<=f;i++)for(let a=o;a<=s;a++){if(i===e&&a===n)continue;const l=colorDelta(t,t,c,4*(a*r+i),!0);if(0===l){if(++g>2)return!1}else l<x?(x=l,u=i,h=a):l>y&&(y=l,d=i,b=a)}return 0!==x&&0!==y&&(hasManySiblings(t,u,h,r,i)&&hasManySiblings(a,u,h,r,i)||hasManySiblings(t,d,b,r,i)&&hasManySiblings(a,d,b,r,i))}function hasManySiblings(t,e,n,r,i){const a=Math.max(e-1,0),l=Math.max(n-1,0),o=Math.min(e+1,r-1),f=Math.min(n+1,i-1),s=4*(n*r+e);let c=e===a||e===o||n===l||n===f?1:0;for(let i=a;i<=o;i++)for(let a=l;a<=f;a++){if(i===e&&a===n)continue;const l=4*(a*r+i);if(t[s]===t[l]&&t[s+1]===t[l+1]&&t[s+2]===t[l+2]&&t[s+3]===t[l+3]&&c++,c>2)return!0}return!1}function colorDelta(t,e,n,r,i){let a=t[n+0],l=t[n+1],o=t[n+2],f=t[n+3],s=e[r+0],c=e[r+1],u=e[r+2],h=e[r+3];if(f===h&&a===s&&l===c&&o===u)return 0;f<255&&(a=blend(a,f/=255),l=blend(l,f),o=blend(o,f)),h<255&&(s=blend(s,h/=255),c=blend(c,h),u=blend(u,h));const d=rgb2y(a,l,o)-rgb2y(s,c,u);if(i)return d;const b=rgb2i(a,l,o)-rgb2i(s,c,u),g=rgb2q(a,l,o)-rgb2q(s,c,u);return.5053*d*d+.299*b*b+.1957*g*g}function rgb2y(t,e,n){return.29889531*t+.58662247*e+.11448223*n}function rgb2i(t,e,n){return.59597799*t-.2741761*e-.32180189*n}function rgb2q(t,e,n){return.21147017*t-.52261711*e+.31114694*n}function blend(t,e){return 255+(t-255)*e}function drawPixel(t,e,n,r,i){t[e+0]=n,t[e+1]=r,t[e+2]=i,t[e+3]=255}function drawGrayPixel(t,e,n,r){const i=blend(rgb2y(t[e+0],t[e+1],t[e+2]),n*t[e+3]/255);drawPixel(r,e,i,i,i)}
//# sourceMappingURL=/sm/1bc043df263da0529d56337549c65db0ba51288fae37c5284367bb35d6639780.map